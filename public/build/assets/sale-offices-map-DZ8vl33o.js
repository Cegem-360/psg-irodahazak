import{G as d}from"./google-maps-utils-CayYpv_9.js";class p{constructor(){this.mapsManager=new d}async initialize(e,t){try{await this.mapsManager.initializeGoogleMaps(e,"map",()=>{this.updateMapMarkers(t)})}catch(i){console.error("Failed to initialize Google Maps:",i)}}async updateMapMarkers(e){if(!this.mapsManager.map||!this.mapsManager.geocoder||(this.mapsManager.clearMarkers(),!e||e.length===0))return;this.mapsManager.updateMapPlaceholder("Címek feldolgozása...");const t=[];for(let s=0;s<e.length;s++){const a=e[s];if(!a.address||a.address.trim()===""){console.warn("Empty address for office:",a.title);continue}const n=s*300,o=new Promise(r=>{setTimeout(async()=>{try{const c=await this.mapsManager.geocodeAddress(a.address);r({office:a,coords:c,success:!0})}catch(c){console.warn(`Failed to geocode address "${a.address}" for office "${a.title}":`,c),r({office:a,coords:null,success:!1})}},n)});t.push(o)}const i=await Promise.all(t),l=[];i.forEach(({office:s,coords:a,success:n})=>{if(n&&a){const o=this.mapsManager.createInfoWindowContent(s),r=this.mapsManager.addMarker(a,s.title,o,!1);r&&l.push(r)}}),this.mapsManager.hideMapPlaceholder(),l.length>0?this.mapsManager.fitMarkersToView():this.mapsManager.showMapMessage("Nem sikerült megjeleníteni a címeket a térképen.")}async refreshMarkers(e){this.mapsManager.mapInitialized&&await this.updateMapMarkers(e)}}window.saleOfficesMapHandler=new p;
